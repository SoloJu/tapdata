[
  {
    "insert": "DataInspectFunctions",
    "documents": [
      {
        "type": "Mongo",
        "category" : "standard",
        "className": "TimeUpdate",
        "methodName": "$dynamicDate",
        "desc" : "说明：校验任务过滤条件中时间参数自动根据配置做值更新，目前该函数仅支持Mongo。改属性包含的参数有： （1）format: 可变时间格式串，用法如示例；（2）subtract: 时间相对减少量，单位毫秒,默认值为0，即当前配置时间，如format中使用了占位符则取当前任务时间；（3）toString: 是否输出为时间字符串，可不填默认值为false, false表示输出为时日期对象等价于$date",
        "example": "例如：\n(1)固定时间：{ \n  \"field\": {\n    \"$gt\": {\n      \"$dynamicDate\": {\n \"format\": \"2023-03-19 05:00:00\", \n \"subtract\": 3600000, \n \"toString\": false\n}\n  }\n}\n以上过滤条件的含义为：查询所有字段field时间大于\"2023-03-19 04:00:00\"的记录，配置中时间为\"2023-03-19 05:00:00\",时间减少的跨度为3600000\n(2)动态天数：\n{ \n  \"field\": {\n    \"$gt\": {\n      \"$dynamicDate\": {\n \"format\":        \"%y-%M-%d 00:00:00\",\n        \"subtract\": 86400000\n        \"toString\":false\n    }\n  }\n  }\n}\n以上过滤条件的含义为：每次任务启动时查询一天前所有字段field时间0点以后的记录，配置中时间为\"%y-%M-%d 00:00:00\",时间减少的跨度为86400000。%y为年份占位符，使用任务启动时间的年份。%M为月份占位符，使用任务启动的月份，依次类推，还支持的占位符有%d, %h, %m, %s, %S"
      }
    ]
  }
]